<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src https://cdnjs.cloudflare.com https://fonts.gstatic.com; img-src 'self' data: https://images.unsplash.com https://cdn-icons-png.flaticon.com; connect-src 'self' https://api.open-meteo.com https://air-quality-api.open-meteo.com;">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
<meta name="theme-color" content="#000000">
<meta name="description" content="Bayan-Olgii Weather App - High Accuracy">

<link rel="manifest" href="manifest.json">

<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/1163/1163661.png">
<title>ULGI PRO | PWA READY</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* --- WEB BUILDER FIX (100% SCALE) --- */
  * {
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
  }
  
  :root {
    --bg: #000000;
    --text: #ffffff;
    --safe: #00e5ff;   /* –ö”®–ö */
    --warn: #ffab00;   /* –°–ê–†–´ */
    --dang: #ff1744;   /* “ö–´–ó–´–õ */
    --card: rgba(20, 26, 40, 0.92);
    --border: rgba(255, 255, 255, 0.15);
  }

  html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Google Sans', sans-serif;
    background: var(--bg); color: var(--text);
    min-height: 100vh; padding-bottom: 50px;
    overflow-x: hidden; -webkit-user-select: none; user-select: none;
    -webkit-tap-highlight-color: transparent;
    overscroll-behavior-y: none; /* Pull-to-refresh ”©—à—ñ—Ä—É */
  }

  /* --- SECURITY SCREEN STYLES --- */
  #security-gate {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000000; z-index: 9999;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
  }
  .lock-icon { font-size: 40px; color: var(--safe); margin-bottom: 25px; }
  .sec-input {
    background: rgba(255,255,255,0.1); border: 1px solid #333; color: #fff;
    font-size: 24px; padding: 12px; border-radius: 12px;
    width: 160px; text-align: center; letter-spacing: 8px; outline: none; margin-bottom: 25px;
    font-weight: bold;
  }
  .sec-input:focus { border-color: var(--safe); }
  .sec-btn {
    background: var(--safe); color: #000; font-weight: 800;
    border: none; padding: 14px 40px; border-radius: 30px; font-size: 14px;
    letter-spacing: 1px; cursor: pointer; text-transform: uppercase;
    box-shadow: 0 0 15px rgba(0, 229, 255, 0.3);
  }
  .sec-btn:active { transform: scale(0.95); }
  .sec-err { color: var(--dang); font-size: 12px; margin-top: 20px; display: none; font-weight: bold; }

  /* APP HIDDEN INITIALLY */
  #app-container { display: none; opacity: 0; transition: opacity 0.6s ease; }

  #bg-layer {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: -2; background-size: cover; background-position: center;
    filter: brightness(0.35); transition: background-image 1s ease;
  }

  .container { max-width: 480px; margin: 0 auto; padding: 15px; position: relative; z-index: 1; }

  /* SELECTOR */
  .loc-wrapper { display: flex; justify-content: center; margin-bottom: 10px; margin-top: 10px; }
  .loc-select {
    background: rgba(0,0,0,0.6); color: #fff; border: 1px solid var(--safe);
    padding: 8px 20px; border-radius: 30px; font-size: 14px; font-weight: 700;
    outline: none; text-align: center; text-transform: uppercase; letter-spacing: 1px;
    -webkit-appearance: none;
  }

  /* HEAD INFO */
  .main-info { text-align: center; margin: 20px 0; }
  .temp-big { font-size: 100px; font-weight: 600; line-height: 0.9; letter-spacing: -5px; text-shadow: 0 10px 30px rgba(0,0,0,0.5); }
  .cond-text { font-size: 22px; text-transform: capitalize; margin-top: 5px; font-weight: 500; color: #cfd8dc; }

  /* NEW FEELS LIKE STYLE */
  .feels-like-badge {
    display: inline-block; margin-top: 8px;
    font-size: 16px; font-weight: 700; color: var(--safe);
    background: rgba(0, 229, 255, 0.15); padding: 5px 15px; border-radius: 20px;
    border: 1px solid rgba(0, 229, 255, 0.3);
  }

  .update-badge {
    display: inline-block; background: rgba(255,255,255,0.1);
    padding: 4px 12px; border-radius: 12px; font-size: 10px; color: #aaa; margin-bottom: 5px;
  }

  /* QUOTE */
  .quote-box {
    background: linear-gradient(90deg, rgba(0,229,255,0.1), rgba(0,0,0,0));
    border-left: 3px solid var(--safe); padding: 15px; margin: 20px 0;
    border-radius: 0 12px 12px 0;
  }
  .q-text { font-style: italic; font-size: 13px; line-height: 1.4; color: #eceff1; }
  .q-auth { font-size: 10px; font-weight: 800; color: var(--safe); margin-top: 5px; text-transform: uppercase; text-align: right;}

  /* GRID */
  .grid-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 20px; }
  .stat-card { background: var(--card); padding: 12px; border-radius: 16px; border: 1px solid var(--border); }
  .stat-head { font-size: 10px; text-transform: uppercase; color: #90a4ae; font-weight: 700; }
  .stat-val { font-size: 20px; font-weight: 700; margin-top: 4px; display: flex; align-items: center; gap: 6px; }
  .stat-desc { font-size: 10px; font-weight: 600; padding: 2px 6px; border-radius: 4px; margin-top: 4px; display: inline-block; }

  /* LIST HEADERS */
  .sec-title {
    font-size: 12px; font-weight: 900; color: var(--safe);
    margin: 30px 0 15px; text-transform: uppercase; letter-spacing: 1px;
    display: flex; align-items: center; gap: 10px;
  }
  .sec-title::after { content:''; flex:1; height:1px; background: rgba(255,255,255,0.15); }

  /* HOURLY SCROLL */
  .h-scroll { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 10px; scrollbar-width: none; }
  .h-item {
    min-width: 90px; background: var(--card); border-radius: 18px; padding: 12px;
    border: 1px solid var(--border); display: flex; flex-direction: column; align-items: center;
  }
  .h-time { font-size: 12px; font-weight: 700; color: #fff; margin-bottom: 5px; }
  .h-temp { font-size: 24px; font-weight: 700; margin: 5px 0; }
  .h-row { width: 100%; display: flex; justify-content: space-between; font-size: 10px; margin-top: 4px; color: #b0bec5; }
  .status-badge { font-size: 9px; padding: 2px 5px; border-radius: 4px; color: #000; font-weight: 700; margin-top: 5px; width: 100%; text-align: center; }

  /* DAILY LIST - BIGGER FONTS */
  .d-list { display: flex; flex-direction: column; gap: 8px; }
  .d-item {
    background: var(--card); padding: 15px; border-radius: 18px; border: 1px solid var(--border);
    display: flex; flex-direction: column; gap: 10px;
  }
  .d-top { display: flex; justify-content: space-between; align-items: center; }
  .d-day { font-size: 15px; font-weight: 700; text-transform: capitalize; }
  .d-icon { font-size: 26px; }

  .d-temp-grp { text-align: right; display: flex; align-items: center; gap: 10px; }

  /* --- ”®–ó–ì–ï–†–¢–Ü–õ–ì–ï–ù –ñ–ï–†: “Æ–õ–ö–ï–ù –¢–ï–ú–ü–ï–†–ê–¢–£–†–ê–õ–ê–† --- */
  .d-max { font-size: 26px; font-weight: 900; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.2); }
  .d-min { font-size: 18px; font-weight: 700; color: #90a4ae; opacity: 0.8; }
  /* ------------------------------------------ */

  .d-grid { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.08); }
  .d-stat { display: flex; flex-direction: column; align-items: center; font-size: 10px; color: #b0bec5; text-align: center; }
  .d-val-txt { font-weight: 700; color: #fff; font-size: 11px; }

  .sys-log { margin-top: 40px; text-align: center; font-size: 9px; color: #546e7a; font-family: monospace; }

  .c-safe { color: var(--safe); }
  .c-warn { color: var(--warn); }
  .c-dang { color: var(--dang); }
  .bg-safe { background: var(--safe); color: #000; }
  .bg-warn { background: var(--warn); color: #000; }
  .bg-dang { background: var(--dang); color: #fff; }

</style>
</head>
<body>

  <div id="security-gate">
    <div class="lock-icon"><i class="fas fa-fingerprint"></i></div>
    <div id="lockTitle" style="margin-bottom:20px; font-weight:bold; letter-spacing:2px; font-size:12px; color:#546e7a;">
      ULGI PRO SECURE SYSTEM
    </div>
    
    <input type="tel" id="passInput" class="sec-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="4">
    
    <button id="lockBtn" onclick="processPin()" class="sec-btn">–ö–Ü–†–£</button>
    
    <div id="errMsg" class="sec-err"><i class="fas fa-ban"></i> “ö–ê–¢–ï! –†“±“õ—Å–∞—Ç –∂–æ“õ.</div>
    <div id="resetMsg" style="margin-top:20px; font-size:10px; color:#444; display:none;" onclick="resetPin()">PIN “±–º—ã—Ç—Ç—ã“£—ã–∑ –±–∞? (–ë–∞—Å—É)</div>
  </div>

  <div id="bg-layer"></div>

  <div id="app-container" class="container">
    <div style="text-align:center;">
    <div class="update-badge" id="modelInfo"><i class="fas fa-satellite-dish"></i> –ñ“Ø–π–µ “õ–æ—Å—ã–ª—É–¥–∞...</div>
  </div>
    <div class="loc-wrapper">
    <select id="locSelect" class="loc-select" onchange="switchLocation()"></select>
  </div>
    <div class="main-info">
    <div class="temp-big" id="mainTemp">--</div>
    <div class="cond-text" id="mainCond">--</div>
  <div id="feelsLikeBadge" class="feels-like-badge"></div>

<div style="font-size:13px; margin-top:10px; font-weight:600;" id="mainStatus"></div>
<div style="font-size:11px; color:#90a4ae; margin-top:5px;" id="mainAdvice"></div>

  </div>
    <div class="quote-box">
    <div class="q-text" id="qBody"></div>
    <div class="q-auth" id="qAuth"></div>
  </div>
    <div class="grid-stats">
    <div class="stat-card">
      <div class="stat-head">–ñ–µ–ª (–º/—Å)</div>
      <div class="stat-val" id="windVal">-- <i id="windArr" class="fas fa-location-arrow" style="font-size:12px;"></i></div>
      <div class="stat-desc" id="windStatus">--</div>
    </div>
    <div class="stat-card">
      <div class="stat-head">–ñ–∞—É—ã–Ω (–º–º)</div>
      <div class="stat-val" id="rainVal">--</div>
      <div class="stat-desc" id="rainStatus">--</div>
    </div>
    <div class="stat-card">
      <div class="stat-head">–´–ª“ì–∞–ª</div>
      <div class="stat-val" id="humVal">--%</div>
      <div class="stat-desc" id="humStatus">--</div>
    </div>
    <div class="stat-card">
      <div class="stat-head">–ê—É–∞ –°–∞–ø–∞—Å—ã</div>
      <div class="stat-val" id="aqiVal">--</div>
      <div class="stat-desc" id="aqiStatus">--</div>
    </div>
  </div>
    <div class="sec-title"><i class="fas fa-clock"></i> 24 –°–∞“ì–∞—Ç—Ç—ã“õ –ë–æ–ª–∂–∞–º</div>
  <div class="h-scroll" id="hourlyList"></div>
    <div class="sec-title"><i class="fas fa-calendar-alt"></i> 7 –ö“Ø–Ω (–ö“Ø–Ω–¥—ñ–∑ / –¢“Ø–Ω)</div>
  <div class="d-list" id="dailyList"></div>
    <div class="sys-log">
    ULGI PRO v21 ‚Ä¢ PWA EDITION<br>
    BAYAN-OLGII SPECIAL ‚Ä¢ 3-STEP FALLBACK<br>
    POWERED BY ECMWF/OPEN-METEO
  </div>
  </div>

<script>

// --- –ñ–ê“¢–ê “ö–ê–£–Ü–ü–°–Ü–ó–î–Ü–ö –õ–û–ì–ò–ö–ê–°–´ (Smart PIN) ---
const STORAGE_KEY = 'ULGI_USER_PIN_HASH'; // –¢–µ–ª–µ—Ñ–æ–Ω –∂–∞–¥—ã–Ω–¥–∞“ì—ã –∫—ñ–ª—Ç –∞—Ç–∞—É—ã
let isSetupMode = false; // “ö–∞–∑—ñ—Ä –ø–∞—Ä–æ–ª—å –æ—Ä–Ω–∞—Ç—É –∫–µ—Ä–µ–∫ –ø–µ, ”ô–ª–¥–µ —Ç–µ–∫—Å–µ—Ä—É –∫–µ—Ä–µ–∫ –ø–µ?

// “ö–æ—Å—ã–º—à–∞ –∞—à—ã–ª“ì–∞–Ω–¥–∞ –±—ñ—Ä–¥–µ–Ω —Ç–µ–∫—Å–µ—Ä–µ–º—ñ–∑
document.addEventListener("DOMContentLoaded", () => {
  checkSystemState();
});

function checkSystemState() {
  const savedHash = localStorage.getItem(STORAGE_KEY);
  const title = document.getElementById('lockTitle');
  const btn = document.getElementById('lockBtn');
  const reset = document.getElementById('resetMsg');

  if (!savedHash) {
    // –ï–≥–µ—Ä –∂–∞–¥—ã–¥–∞ –ø–∞—Ä–æ–ª—å –∂–æ“õ –±–æ–ª—Å–∞ (1-—à—ñ —Ä–µ—Ç –∫—ñ—Ä—É)
    isSetupMode = true;
    title.innerText = "–ñ–ê“¢–ê PIN-–ö–û–î –û–ô–õ–ê–ü –¢–ê–ë–´“¢–´–ó";
    title.style.color = "#00e5ff"; // –ö”©–∫ —Ç“Ø—Å
    btn.innerText = "–°–ê“ö–¢–ê–£";
    reset.style.display = 'none';
  } else {
    // –ï–≥–µ—Ä –ø–∞—Ä–æ–ª—å –±–∞—Ä –±–æ–ª—Å–∞
    isSetupMode = false;
    title.innerText = "–ö–Ü–†–£ “Æ–®–Ü–ù PIN –¢–ï–†–Ü“¢–Ü–ó";
    title.style.color = "#546e7a";
    btn.innerText = "–ö–Ü–†–£";
    // 3 “õ–∞—Ç–µ ”ô—Ä–µ–∫–µ—Ç—Ç–µ–Ω –∫–µ–π—ñ–Ω reset –∫”©—Ä—Å–µ—Ç—É–≥–µ –±–æ–ª–∞–¥—ã (“õ–∞—Ä–∞–ø–∞–π—ã–º –±–æ–ª—É “Ø—à—ñ–Ω –±—ñ—Ä–¥–µ–Ω “õ–æ—Å—Ç—ã–º)
    reset.style.display = 'block';
  }
}

function processPin() {
  const input = document.getElementById('passInput').value;
  const err = document.getElementById('errMsg');
  
  // –ï–≥–µ—Ä –±–æ—Å –±–æ–ª—Å–∞ –Ω–µ–º–µ—Å–µ 4 —Å–∞–Ω–Ω–∞–Ω –∞–∑ –±–æ–ª—Å–∞
  if (input.length < 4) {
    err.innerHTML = "PIN –∫–µ–º—ñ–Ω–¥–µ 4 —Å–∞–Ω –±–æ–ª—É—ã –∫–µ—Ä–µ–∫!";
    err.style.display = 'block';
    return;
  }

  // –ï–Ω–≥—ñ–∑—ñ–ª–≥–µ–Ω —Å–∞–Ω–¥—ã —Ö—ç—à—Ç–µ–π–º—ñ–∑
  const inputHash = CryptoJS.SHA256(input).toString();

  if (isSetupMode) {
    // --- –ü–ê–†–û–õ–¨ –û–†–ù–ê–¢–£ –†–ï–ñ–ò–ú–Ü ---
    // –ñ–∞“£–∞ –ø–∞—Ä–æ–ª—å–¥—ñ —Ç–µ–ª–µ—Ñ–æ–Ω –∂–∞–¥—ã–Ω–∞ —Å–∞“õ—Ç–∞–π–º—ã–∑
    localStorage.setItem(STORAGE_KEY, inputHash);
    
    // –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—Ç—ñ –∂–∞“£–∞—Ä—Ç–∞–º—ã–∑
    alert("PIN —Å”ô—Ç—Ç—ñ –æ—Ä–Ω–∞—Ç—ã–ª–¥—ã! –ï–Ω–¥—ñ –æ—Å—ã –∫–æ–¥–ø–µ–Ω –∫—ñ—Ä–µ—Å—ñ–∑.");
    unlockApp();
    
  } else {
    // --- –ü–ê–†–û–õ–¨ –¢–ï–ö–°–ï–†–£ –†–ï–ñ–ò–ú–Ü ---
    const savedHash = localStorage.getItem(STORAGE_KEY);
    
    if (inputHash === savedHash) {
      // –î“±—Ä—ã—Å –±–æ–ª—Å–∞
      unlockApp();
    } else {
      // “ö–∞—Ç–µ –±–æ–ª—Å–∞
      err.innerHTML = `<i class="fas fa-ban"></i> “ö–ê–¢–ï! PIN –¥“±—Ä—ã—Å –µ–º–µ—Å.`;
      err.style.display = 'block';
      if(navigator.vibrate) navigator.vibrate(200);
      document.getElementById('passInput').value = ""; // –¢–∞–∑–∞–ª–∞—É
    }
  }
}

function unlockApp() {
  document.getElementById('security-gate').style.display = 'none';
  const app = document.getElementById('app-container');
  app.style.display = 'block';
  setTimeout(() => { app.style.opacity = '1'; }, 50);
  
  // –ê—É–∞ —Ä–∞–π—ã–Ω —Ç–µ–∫—Å–µ—Ä–µ–º—ñ–∑
  runSystem(); 
}

// –ï–≥–µ—Ä PIN “±–º—ã—Ç—ã–ø “õ–∞–ª—Å–∞ (–¢–æ–ª—ã“õ —Ç–∞–∑–∞—Ä—Ç—É)
function resetPin() {
  const confirmReset = confirm("PIN –∫–æ–¥—Ç—ã “±–º—ã—Ç—Ç—ã“£—ã–∑ –±–∞? –ë–∞—Ä–ª—ã“õ –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ ”©—à—ñ—Ä—ñ–ø, “õ–∞–π—Ç–∞ –æ—Ä–Ω–∞—Ç—É “õ–∞–∂–µ—Ç –ø–µ?");
  if(confirmReset) {
    localStorage.removeItem(STORAGE_KEY);
    location.reload(); // –ë–µ—Ç—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
  }
}

// --- CONFIGURATION ---
const SUMS = [
  { name: "”®–ª–≥–∏–π (–û—Ä—Ç–∞–ª—ã“õ)", lat: 48.9707, lon: 89.9678 },
  { name: "–ê–ª—Ç–∞–π", lat: 48.2937, lon: 89.5113 },
  { name: "–ê–ª—Ç–∞–Ω—Ü”©–≥—Ü", lat: 49.0556, lon: 90.5283 },
  { name: "–ë–∞—è–Ω–Ω—É—É—Ä", lat: 48.9567, lon: 91.0125 },
  { name: "–ë—É–≥–∞—Ç", lat: 48.9328, lon: 90.0169 },
  { name: "–ë—É–ª–≥–∞–Ω", lat: 46.9206, lon: 91.0911 },
  { name: "–ë—É—è–Ω—Ç", lat: 48.5303, lon: 89.4719 },
  { name: "–î—ç–ª“Ø“Ø–Ω", lat: 47.8094, lon: 90.7578 },
  { name: "–ù–æ–≥–æ–æ–Ω–Ω—É—É—Ä", lat: 49.6192, lon: 90.2228 },
  { name: "–°–∞–≥—Å–∞–π", lat: 48.9083, lon: 89.6506 },
  { name: "–¢–æ–ª–±–æ", lat: 48.4419, lon: 90.0578 },
  { name: "–¶–∞–≥–∞–∞–Ω–Ω—É—É—Ä", lat: 49.5317, lon: 89.7731 },
  { name: "–¶—ç–Ω–≥—ç–ª", lat: 49.0772, lon: 88.8500 },
  { name: "–£–ª–∞–∞–Ω—Ö—É—Å", lat: 49.3339, lon: 89.4564 }
];

// 30 NOBEL QUOTES
const QUOTES = [
  {q:"–ï–∫—ñ –Ω”ô—Ä—Å–µ —à–µ–∫—Å—ñ–∑: “í–∞–ª–∞–º –∂”ô–Ω–µ –∞–¥–∞–º–Ω—ã“£ –∞“õ—ã–º–∞“õ—Ç—ã“ì—ã.", a:"–ê. –≠–π–Ω—à—Ç–µ–π–Ω (–ù–æ–±–µ–ª—å 1921)"},
  {q:"–ê–¥–∞–º –∂–µ“£—ñ–ª—É “Ø—à—ñ–Ω –∂–∞—Ä–∞—Ç—ã–ª–º–∞“ì–∞–Ω.", a:"–≠. –•–µ–º–∏–Ω–≥—É—ç–π (–ù–æ–±–µ–ª—å 1954)"},
  {q:"–ï–≥–µ—Ä —Å—ñ–∑ —Ç–æ–∑–∞“õ—Ç–∞–Ω ”©—Ç—ñ–ø –±–∞—Ä–∞ –∂–∞—Ç—Å–∞“£—ã–∑, —Ç–æ“õ—Ç–∞–º–∞“£—ã–∑.", a:"–£. –ß–µ—Ä—á–∏–ª–ª—å (–ù–æ–±–µ–ª—å 1953)"},
  {q:"–ë–µ–π–±—ñ—Ç—à—ñ–ª—ñ–∫ –∫“Ø–ª—ñ–º—Å—ñ—Ä–µ—É–¥–µ–Ω –±–∞—Å—Ç–∞–ª–∞–¥—ã.", a:"–¢–µ—Ä–µ–∑–∞ –ê–Ω–∞ (–ù–æ–±–µ–ª—å 1979)"},
  {q:"“ö–∞—Ä–∞“£“ì—ã–ª—ã“õ—Ç—ã –∂–∞—Ä—ã“õ “õ–∞–Ω–∞ –∂–µ“£–µ –∞–ª–∞–¥—ã.", a:"–ú. –õ—é—Ç–µ—Ä –ö–∏–Ω–≥ (–ù–æ–±–µ–ª—å 1964)"},
  {q:"–ë—ñ–ª—ñ–º ‚Äì ”ô–ª–µ–º–¥—ñ ”©–∑–≥–µ—Ä—Ç—É–≥–µ –±–æ–ª–∞—Ç—ã–Ω –µ“£ “õ—É–∞—Ç—Ç—ã “õ–∞—Ä—É.", a:"–ù. –ú–∞–Ω–¥–µ–ª–∞ (–ù–æ–±–µ–ª—å 1993)"},
  {q:"–ë–∞“õ—ã—Ç –¥–∞–π—ã–Ω –Ω”ô—Ä—Å–µ –µ–º–µ—Å, –æ–ª —Å—ñ–∑–¥—ñ“£ —ñ—Å-”ô—Ä–µ–∫–µ—Ç—ñ“£—ñ–∑–¥–µ–Ω —Ç—É—ã–Ω–¥–∞–π–¥—ã.", a:"–î–∞–ª–∞–π –õ–∞–º–∞ (–ù–æ–±–µ–ª—å 1989)"},
  {q:"”®–º—ñ—Ä –¥–µ–≥–µ–Ω—ñ–º—ñ–∑ ‚Äì ”©–∑—ñ“£–¥—ñ —Ç–∞–±—É –µ–º–µ—Å, ”©–∑—ñ“£–¥—ñ –∂–∞—Å–∞—É.", a:"–î–∂. –®–æ—É (–ù–æ–±–µ–ª—å 1925)"},
  {q:"–ë–∞—Ç—ã–ª–¥—ã“õ ‚Äì “õ–æ—Ä“õ—ã–Ω—ã—à—Ç—ã“£ –∂–æ“õ—Ç—ã“ì—ã –µ–º–µ—Å, –æ–Ω—ã –∂–µ“£—É.", a:"–ú–∞—Ä–∫ –¢–≤–µ–Ω"},
  {q:"–ï“£ “±–∑–∞“õ —Å–∞–ø–∞—Ä –¥–∞ –±—ñ—Ä “õ–∞–¥–∞–º–Ω–∞–Ω –±–∞—Å—Ç–∞–ª–∞–¥—ã.", a:"–õ–∞–æ-—Ü–∑—ã"},
  {q:"”®–º—ñ—Ä –±—ñ–∑ –±–∞—Å“õ–∞ –∂–æ—Å–ø–∞—Ä–ª–∞—Ä “õ“±—Ä—ã–ø –∂–∞—Ç“õ–∞–Ω–¥–∞ ”©—Ç—ñ–ø –∫–µ—Ç–µ–¥—ñ.", a:"–î–∂–æ–Ω –õ–µ–Ω–Ω–æ–Ω"},
  {q:"“ö–∞—Ç–µ–ª—ñ–∫ –∂–∞—Å–∞–º–∞“ì–∞–Ω –∞–¥–∞–º –µ—à“õ–∞—à–∞–Ω –∂–∞“£–∞–ª—ã“õ –∞—à–ø–∞“ì–∞–Ω.", a:"–ê. –≠–π–Ω—à—Ç–µ–π–Ω"},
  {q:"–°“Ø–π—ñ—Å–ø–µ–Ω—à—ñ–ª—ñ–∫ –∂–æ“õ –∂–µ—Ä–¥–µ ”©–º—ñ—Ä –¥–µ –∂–æ“õ.", a:"–ú–∞—Ö–∞—Ç–º–∞ –ì–∞–Ω–¥–∏"},
  {q:"–£–∞“õ—ã—Ç—Ç—ã –∂–æ“ì–∞–ª—Ç—É ‚Äì –µ“£ “Ø–ª–∫–µ–Ω —à—ã“ì—ã–Ω.", a:"–ë. –§—Ä–∞–Ω–∫–ª–∏–Ω"},
  {q:"–ö“Ø—Ç—É–¥—ñ –±—ñ–ª–µ—Ç—ñ–Ω –∞–¥–∞–º“ì–∞ –±”ô—Ä—ñ ”©–∑ —É–∞“õ—ã—Ç—ã–Ω–¥–∞ –∫–µ–ª–µ–¥—ñ.", a:"–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π"},
  {q:"–ê—à—É ‚Äì –±–∞—Å“õ–∞–ª–∞—Ä–¥—ã“£ “õ–∞—Ç–µ–ª—ñ–≥—ñ “Ø—à—ñ–Ω ”©–∑—ñ“£–¥—ñ –∂–∞–∑–∞–ª–∞—É.", a:"–ë—É–¥–¥–∞"},
  {q:"–¢–∞–±—ã—Å ‚Äì —Å”ô—Ç—Å—ñ–∑–¥—ñ–∫—Ç–µ–Ω —Å”ô—Ç—Å—ñ–∑–¥—ñ–∫–∫–µ “õ“±–ª—à—ã–Ω—ã—Å—Ç—ã –∂–æ“ì–∞–ª—Ç–ø–∞–π –∂–µ—Ç—É.", a:"–£. –ß–µ—Ä—á–∏–ª–ª—å"},
  {q:"–î–æ—Å —Ç–∞–±—É–¥—ã“£ –∂–∞–ª“ì—ã–∑ –∂–æ–ª—ã ‚Äì –¥–æ—Å –±–æ–ª—É.", a:"–†. –≠–º–µ—Ä—Å–æ–Ω"},
  {q:"–ë—ñ—Ä –µ—Å—ñ–∫ –∂–∞–±—ã–ª—Å–∞, –µ–∫—ñ–Ω—à—ñ—Å—ñ –∞—à—ã–ª–∞–¥—ã.", a:"–ê. –ì. –ë–µ–ª–ª"},
  {q:"–ñ“Ø—Ä–µ–≥—ñ“£–Ω—ñ“£ “Ø–Ω—ñ–Ω —Ç—ã“£–¥–∞.", a:"–ü–∞—É–ª–æ –ö–æ—ç–ª—å–æ"},
  {q:"”®—Ç–∫–µ–Ω–≥–µ ”©–∫—ñ–Ω–±–µ, –±–æ–ª–∞—à–∞“õ“õ–∞ —Å–µ–Ω.", a:"–ö–æ–Ω—Ñ—É—Ü–∏–π"},
  {q:"–ë–æ–ª–∞—à–∞“õ—Ç—ã –±–æ–ª–∂–∞—É–¥—ã“£ –µ“£ –∂–∞“õ—Å—ã –∂–æ–ª—ã ‚Äì –æ–Ω—ã –∂–∞—Å–∞—É.", a:"–ê–ª–∞–Ω –ö–µ–π"},
  {q:"–ê–¥–∞–º–Ω—ã“£ –∞–¥–∞–º—à—ã–ª—ã“ì—ã ‚Äì –∞“õ—ã–ª, “ì—ã–ª—ã–º...", a:"–ê–±–∞–π"},
  {q:"–ú“Ø–º–∫—ñ–Ω –µ–º–µ—Å –Ω”ô—Ä—Å–µ –∂–æ“õ.", a:"–ú“±—Ö–∞–º–º–µ–¥ ”ò–ª–∏"},
  {q:"”®–∑—ñ“£–¥—ñ –∂–µ“£—É ‚Äì –µ“£ “Ø–ª–∫–µ–Ω –∂–µ“£—ñ—Å.", a:"–ü–ª–∞—Ç–æ–Ω"},
  {q:"–ï“£–±–µ–∫ —Ç“Ø–±—ñ ‚Äì –±–µ—Ä–µ–∫–µ.", a:"–ú–∞“õ–∞–ª"},
  {q:"–°–∞–±—ã—Ä —Ç“Ø–±—ñ ‚Äì —Å–∞—Ä—ã –∞–ª—Ç—ã–Ω.", a:"–ú–∞“õ–∞–ª"},
  {q:"–ö—ñ—Ç–∞–ø ‚Äì –±—ñ–ª—ñ–º –±“±–ª–∞“ì—ã.", a:"–•–∞–ª—ã“õ –¥–∞–Ω–∞–ª—ã“ì—ã"},
  {q:"–î–µ–Ω—Å–∞—É–ª—ã“õ ‚Äì –∑–æ—Ä –±–∞–π–ª—ã“õ.", a:"–•–∞–ª—ã“õ –¥–∞–Ω–∞–ª—ã“ì—ã"},
  {q:"–û—Ç–∞–Ω ‚Äì –æ—Ç—Ç–∞–Ω –¥–∞ —ã—Å—Ç—ã“õ.", a:"–•–∞–ª—ã“õ –¥–∞–Ω–∞–ª—ã“ì—ã"}
];

const RULES = {
  wind: { warn: 4.5, dang: 10 },
  temp: { warn_low: -20, dang_low: -30 }
};

function getStatus(type, val) {
  if(type === 'wind') {
    if(val > RULES.wind.dang) return { txt: "“ö–ê–£–Ü–ü–¢–Ü", cls: "c-dang", bg: "bg-dang" };
    if(val > RULES.wind.warn) return { txt: "–ï–°–ö–ï–†–¢–£", cls: "c-warn", bg: "bg-warn" };
    return { txt: "“ö–∞–ª—ã–ø—Ç—ã", cls: "c-safe", bg: "bg-safe" };
  }
  if(type === 'temp') {
    if(val <= RULES.temp.dang_low) return { txt: "–ê–Ø–ó!", cls: "c-dang", bg: "bg-dang" };
    if(val <= RULES.temp.warn_low) return { txt: "–°—É—ã“õ", cls: "c-warn", bg: "bg-warn" };
    return { txt: "–ñ–∞–π–ª—ã", cls: "c-safe", bg: "bg-safe" };
  }
  if(type === 'rain') {
    if(val > 10) return { txt: "–ù”©—Å–µ—Ä", cls: "c-dang", bg: "bg-dang" };
    if(val > 2) return { txt: "–ñ–∞“£–±—ã—Ä", cls: "c-warn", bg: "bg-warn" };
    if(val > 0) return { txt: "–°—ñ—Ä–∫—ñ—Ä–µ—É", cls: "c-safe", bg: "bg-safe" };
    return { txt: "–ñ–æ“õ", cls: "c-safe", bg: "transparent" };
  }
  return { txt: "", cls: "", bg: "" };
}

function getWindDir(deg) { return `transform: rotate(${deg + 180}deg)`; }

const WEATHER_CODES = {
  0: {t:"–ê—à—ã“õ", i:"‚òÄÔ∏è"}, 1: {t:"–ê–∑ –±“±–ª—Ç—Ç—ã", i:"üå§"}, 2: {t:"–ë“±–ª—Ç—Ç—ã", i:"‚õÖ"}, 3: {t:"–¢“Ø–Ω–µ—Ä–≥–µ–Ω", i:"‚òÅÔ∏è"},
  45: {t:"–¢“±–º–∞–Ω", i:"üå´"}, 48: {t:"“ö—ã–ª–∞—É", i:"üå´"},
  51: {t:"–ê–∑ –∂–∞“£–±—ã—Ä", i:"üå¶"}, 53: {t:"–ñ–∞“£–±—ã—Ä", i:"üåß"}, 55: {t:"“ö–∞—Ç—Ç—ã –∂–∞“£–±—ã—Ä", i:"üåß"},
  61: {t:"–ñ–∞“£–±—ã—Ä", i:"üåß"}, 63: {t:"–ñ–∞“£–±—ã—Ä", i:"üåß"}, 65: {t:"–ù”©—Å–µ—Ä", i:"üåß"},
  71: {t:"“ö–∞—Ä", i:"üå®"}, 73: {t:"“ö–∞—Ä", i:"üå®"}, 75: {t:"“ö–∞–ª—ã“£ “õ–∞—Ä", i:"‚ùÑÔ∏è"},
  77: {t:"–ë“±—Ä—à–∞“õ", i:"üå®"}, 
  80: {t:"”®—Ç–∫—ñ–Ω—à—ñ –∂–∞“£–±—ã—Ä", i:"üå¶"}, 81: {t:"–ù”©—Å–µ—Ä", i:"üåß"}, 82: {t:"“ö–∞—Ç—Ç—ã –Ω”©—Å–µ—Ä", i:"‚õà"},
  85: {t:"“ö–∞—Ä –±–æ—Ä–∞–Ω—ã", i:"‚ùÑÔ∏è"}, 86: {t:"“ö–∞—Ä –±–æ—Ä–∞–Ω—ã", i:"‚ùÑÔ∏è"},
  95: {t:"–ù–∞–π–∑–∞“ì–∞–π", i:"üå©"}, 96: {t:"–ù–∞–π–∑–∞“ì–∞–π", i:"‚õà"}, 99: {t:"“ö–∞—Ç—Ç—ã –¥–∞—É—ã–ª", i:"‚õà"}
};
function getCode(c) { return WEATHER_CODES[c] || {t:"–ë–µ–ª–≥—ñ—Å—ñ–∑", i:"‚ùì"}; }

let currentLocIndex = 0;
const sel = document.getElementById('locSelect');
SUMS.forEach((loc, i) => {
  let opt = document.createElement('option');
  opt.value = i; opt.text = loc.name;
  sel.appendChild(opt);
});

function switchLocation() {
  currentLocIndex = document.getElementById('locSelect').value;
  runSystem();
}

function setRandomQuote() {
  const r = QUOTES[Math.floor(Math.random() * QUOTES.length)];
  document.getElementById('qBody').innerText = `"${r.q}"`;
  document.getElementById('qAuth').innerText = r.a;
}
setRandomQuote();

// WATERFALL FETCH: ECMWF -> ICON -> GFS
async function runSystem() {
  const loc = SUMS[currentLocIndex];
  const modelEl = document.getElementById('modelInfo');
  
  modelEl.innerHTML = `<i class="fas fa-satellite"></i> 1/3 ECMWF (EU) “õ–æ—Å—ã–ª—É–¥–∞...`;
  let data = await tryFetch('ecmwf_ifs', loc, 2500);
  
  if(!data) {
    modelEl.innerHTML = `<i class="fas fa-satellite"></i> 2/3 ICON (DE) “õ–æ—Å—ã–ª—É–¥–∞...`;
    data = await tryFetch('icon_seamless', loc, 2500);
  }
  
  if(!data) {
    modelEl.innerHTML = `<i class="fas fa-satellite"></i> 3/3 GFS (US) “õ–æ—Å—ã–ª—É–¥–∞...`;
    data = await tryFetch('gfs_global', loc, 3500);
  }

  if(data) {
    renderApp(data.weather, data.air, data.modelName);
  } else {
    modelEl.innerHTML = `<i class="fas fa-exclamation-triangle"></i> –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∂–æ“õ`;
  }
}

async function tryFetch(model, loc, timeoutMs) {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), timeoutMs);

  const wUrl = `https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&models=${model}&current=temperature_2m,apparent_temperature,weather_code,wind_speed_10m,wind_direction_10m,precipitation,relative_humidity_2m,is_day&hourly=temperature_2m,weather_code,wind_speed_10m,wind_direction_10m,precipitation,relative_humidity_2m&daily=weather_code,temperature_2m_max,temperature_2m_min,wind_speed_10m_max,wind_direction_10m_dominant,precipitation_sum,precipitation_probability_max&timezone=auto&wind_speed_unit=ms`;
  
  const aUrl = `https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${loc.lat}&longitude=${loc.lon}&current=european_aqi&timezone=auto`;

  try {
    const [wRes, aRes] = await Promise.all([
      fetch(wUrl, { signal: controller.signal }),
      fetch(aUrl, { signal: controller.signal })
    ]);
    if(!wRes.ok) throw new Error('Weather Fail');
    const wData = await wRes.json();
    const aData = await aRes.json().catch(()=>({})); 
    
    clearTimeout(id);
    return { weather: wData, air: aData, modelName: model.toUpperCase() };
  } catch (e) {
    return null;
  }
}

function renderApp(w, a, modelName) {
  document.getElementById('modelInfo').innerHTML = `<i class="fas fa-shield-alt"></i> ${modelName} ‚Ä¢ ${SUMS[currentLocIndex].name}`;
  
  const c = w.current;
  const h = w.hourly;
  const d = w.daily;

  // HEADER
  const t = Math.round(c.temperature_2m);
  const code = getCode(c.weather_code);
  const tStat = getStatus('temp', t);
  const fl = Math.round(c.apparent_temperature);
  
  const elMainTemp = document.getElementById('mainTemp');
  elMainTemp.innerText = (t>0?"+":"")+t+"¬∞";
  elMainTemp.className = "temp-big " + tStat.cls;
  
  document.getElementById('mainCond').innerText = code.t;
  
  // --- –ñ–ê“¢–ê: Feels Like Badge ---
  const elFl = document.getElementById('feelsLikeBadge');
  elFl.innerHTML = `<i class="fas fa-user-astronaut"></i> –°–ï–ó–Ü–õ–£–Ü: ${fl > 0 ? '+' : ''}${fl}¬∞`;
  
  const wStat = getStatus('wind', c.wind_speed_10m);
  document.getElementById('mainStatus').innerHTML = 
    `<span style="color:${tStat.cls === 'c-safe' ? '#fff' : 'var(--dang)'}">${tStat.txt}</span> ‚Ä¢ 
     <span style="color:${wStat.cls === 'c-safe' ? '#fff' : 'var(--warn)'}">${wStat.txt} –∂–µ–ª</span>`;

  // ADVICE
  let adv = "–ê—É–∞ —Ä–∞–π—ã “õ–æ–ª–∞–π–ª—ã.";
  if(c.wind_speed_10m > 10) adv = "‚ö†Ô∏è –î–ê–õ–ê–î–ê –ñ“Æ–†–£ “ö–ê–£–Ü–ü–¢–Ü! –ñ–µ–ª ”©—Ç–µ “õ–∞—Ç—Ç—ã.";
  else if(c.wind_speed_10m > 4.5) adv = "–ñ–µ–ª –∫“Ø—à–µ–π—ñ–ø —Ç“±—Ä, —Å–∞“õ –±–æ–ª—ã“£—ã–∑.";
  
  if(t < -30) adv = "‚õî –ê–Ø–ó! –ú–µ–∫—Ç–µ–ø –æ“õ—É—à—ã–ª–∞—Ä—ã–Ω–∞ “õ–∞—É—ñ–ø—Ç—ñ.";
  else if(t < -20) adv = "”®—Ç–µ —Å—É—ã“õ, –∂—ã–ª—ã –∫–∏—ñ–Ω—ñ“£—ñ–∑.";
  
  if(c.precipitation > 0) adv += " –ñ–∞—É—ã–Ω-—à–∞—à—ã–Ω –±–∞—Ä.";
  document.getElementById('mainAdvice').innerText = adv;

  // BG
  let bg = "https://images.unsplash.com/photo-1534088568595-a066f410bcda?q=80&w=800"; 
  if(c.is_day === 0) bg = "https://images.unsplash.com/photo-1472552944129-b035e9ea536e?q=80&w=800"; 
  else if(c.weather_code === 0) bg = "https://images.unsplash.com/photo-1601297183305-6df142704ea2?q=80&w=800";
  else if(c.weather_code >= 70) bg = "https://images.unsplash.com/photo-1478265409131-1f65c88f965c?q=80&w=800";
  document.getElementById('bg-layer').style.backgroundImage = `url('${bg}')`;

  // STATS
  document.getElementById('windVal').innerHTML = `${c.wind_speed_10m} <i class="fas fa-location-arrow" style="${getWindDir(c.wind_direction_10m)}; font-size:12px; margin-left:5px;"></i>`;
  const elWStat = document.getElementById('windStatus');
  elWStat.innerText = wStat.txt; elWStat.className = "stat-desc " + wStat.bg;
  
  const rStat = getStatus('rain', c.precipitation);
  document.getElementById('rainVal').innerText = c.precipitation;
  const elRStat = document.getElementById('rainStatus');
  elRStat.innerText = rStat.txt || "–ñ–æ“õ"; elRStat.className = "stat-desc " + (c.precipitation===0 ? 'bg-safe' : rStat.bg);
  if(c.precipitation === 0) elRStat.style.background = "transparent";

  document.getElementById('humVal').innerText = c.relative_humidity_2m + "%";
  document.getElementById('humStatus').innerText = c.relative_humidity_2m < 40 ? "“ö“±—Ä“ì–∞“õ" : "–´–ª“ì–∞–ª–¥—ã";
  document.getElementById('humStatus').className = "stat-desc c-safe";

  const aqi = a?.current?.european_aqi || 0;
  let aqiTxt = "–¢–∞–∑–∞"; let aqiCls = "bg-safe";
  if(aqi > 40) { aqiTxt = "–õ–∞—Å"; aqiCls = "bg-warn"; }
  if(aqi > 80) { aqiTxt = "–ó–∏—è–Ω–¥—ã"; aqiCls = "bg-dang"; }
  document.getElementById('aqiVal').innerText = aqi;
  document.getElementById('aqiStatus').innerText = aqiTxt;
  document.getElementById('aqiStatus').className = "stat-desc " + aqiCls;

  // 24H LIST
  let hHTML = "";
  const nowH = new Date().getHours();
  let startIdx = 0;
  for(let i=0; i<h.time.length; i++){
    if(h.time[i].includes(`T${String(nowH).padStart(2,'0')}`)) { startIdx=i; break; }
  }

  for(let i=startIdx; i<startIdx+24; i++) {
    if(!h.time[i]) break;
    const time = h.time[i].split('T')[1].slice(0,5);
    const temp = Math.round(h.temperature_2m[i]);
    const ws = h.wind_speed_10m[i];
    const prec = h.precipitation[i];
    const wd = h.wind_direction_10m[i];

    const wsS = getStatus('wind', ws);
    const tS = getStatus('temp', temp);
    
    let bdCol = "var(--border)";
    if(wsS.cls === 'c-dang' || tS.cls === 'c-dang') bdCol = "var(--dang)";
    else if(wsS.cls === 'c-warn') bdCol = "var(--warn)";

    hHTML += `
    <div class="h-item" style="border-color:${bdCol}">
      <div class="h-time">${time}</div>
      <div style="font-size:18px;">${getCode(h.weather_code[i]).i}</div>
      <div class="h-temp ${tS.cls}">${temp}¬∞</div>
      <div class="status-badge ${wsS.bg}">${wsS.txt}</div>
      <div class="h-row">
        <span><i class="fas fa-wind"></i> ${ws}</span>
        <span><i class="fas fa-tint"></i> ${prec}</span>
      </div>
      <div class="h-row" style="justify-content:center; margin-top:2px;">
         <i class="fas fa-location-arrow" style="${getWindDir(wd)}"></i>
      </div>
    </div>`;
  }
  document.getElementById('hourlyList').innerHTML = hHTML;

  // 7 DAY LIST
  let dHTML = "";
  for(let i=0; i<7; i++) {
    const date = new Date(d.time[i]);
    const day = i===0 ? "–ë“Ø–≥—ñ–Ω" : date.toLocaleDateString('kk-KZ', {weekday:'long'});
    const maxT = Math.round(d.temperature_2m_max[i]);
    const minT = Math.round(d.temperature_2m_min[i]);
    const maxW = d.wind_speed_10m_max[i];
    const prob = d.precipitation_probability_max[i];
    const sumP = d.precipitation_sum[i];
    
    const wsS = getStatus('wind', maxW);
    const tS = getStatus('temp', minT);

    let warnIcon = "";
    if(wsS.cls === 'c-dang') warnIcon = `<i class="fas fa-exclamation-circle c-dang"></i>`;
    else if(wsS.cls === 'c-warn') warnIcon = `<i class="fas fa-exclamation-triangle c-warn"></i>`;

    dHTML += `
    <div class="d-item">
      <div class="d-top">
        <div class="d-day">${day} ${warnIcon}</div>
        <div class="d-icon">${getCode(d.weather_code[i]).i}</div>
        <div class="d-temp-grp">
           <div class="d-max">${maxT > 0 ? '+' : ''}${maxT}¬∞</div>
           <div class="d-min">${minT}¬∞</div>
        </div>
      </div>
      <div class="d-grid">
        <div class="d-stat">
          <i class="fas fa-wind ${wsS.cls}"></i>
          <span class="d-val-txt">${maxW} –º/—Å</span>
          <span>${wsS.txt}</span>
        </div>
        <div class="d-stat">
          <i class="fas fa-tint c-safe"></i>
          <span class="d-val-txt">${sumP} –º–º</span>
          <span>–ñ–∞—É—ã–Ω</span>
        </div>
        <div class="d-stat">
          <i class="fas fa-umbrella c-safe"></i>
          <span class="d-val-txt">${prob}%</span>
          <span>–´“õ—Ç–∏–º–∞–ª</span>
        </div>
        <div class="d-stat">
          <i class="fas fa-thermometer-empty ${tS.cls}"></i>
          <span class="d-val-txt">${minT}¬∞</span>
          <span>–¢“Ø–Ω</span>
        </div>
      </div>
    </div>`;
  }
  document.getElementById('dailyList').innerHTML = dHTML;
}

// Service Worker-–¥—ñ —Ç—ñ—Ä–∫–µ—É
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js')
      .then(reg => console.log('SW Registered!', reg.scope))
      .catch(err => console.log('SW Error!', err));
  });
}

</script>
</body>
  </html>
